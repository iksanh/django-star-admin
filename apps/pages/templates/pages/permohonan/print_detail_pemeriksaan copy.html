<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 11px;
        }

        h1 {
            text-align: center;
            font-size: 16px;
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #000;
            padding: 1px;
            vertical-align: middle;
        }

        .no {
            width: 5%;
            text-align: center;
        }

        .berkas {
            width: 45%;
        }

        .catatan {
            width: 50%;
        }

        .sub {
            padding-left: 15px;
        }
    </style>
</head>

<body>

<h1>{{ pemohon.layanan.nama }}</h1>

<table>
    <tr>
        <th colspan="2">Nama : {{ pemohon.nama_pemohon }}</th>
        <th colspan="2">
            NIB : {{ pemohon.nik }}
            / {{ pemohon.village.name }}, {{ pemohon.district.name }}
        </th>
    </tr>

    <tr>
        <th class="no">No</th>
        <th class="berkas">Kelengkapan Berkas</th>
        <th class="catatan" colspan="2">Catatan</th>
    </tr>

    {% for item in parent_items %}

        <!-- ================= PARENT ================= -->
        <tr>
            <td class="no">{{ item.nomor }}.</td>
            <td class="berkas"><strong>{{ item.parent.nama }}</strong></td>
            <td class="catatan" colspan="2">
                {% if item.pemeriksaan %}
                    {% for c in item.pemeriksaan.catatan.all %}
                        - {{ c.teks }}<br/>
                    {% endfor %}
                    {{ item.pemeriksaan.catatan_baru|default_if_none:"" }}
                {% endif %}
            </td>
        </tr>

        <!-- ================= SUB BERKAS ================= -->
        {% for sub in item.subs %}
        <tr>
            <td class="no"></td>
            <td class="berkas sub">
                {{ forloop.counter}}. {{ sub.berkas.nama }}
            </td>
            <td class="catatan" colspan="2">
                {% for c in sub.catatan.all %}
                    - {{ c.teks }}<br/>
                {% endfor %}
                {{ sub.catatan_baru|default_if_none:"" }}
            </td>
        </tr>
        {% endfor %}

    {% endfor %}
</table>

</body>
</html>
